# Gemini's Scratchpad

## Project Overview: Maitrilok
- **Type**: Social Media Platform
- **Stack**: MERN (MongoDB, Express, React, Node)
- **Frontend**: `Frontend/` (Vite, React, Tailwind CSS)
- **Backend**: `backend/` (Express, Mongoose)
- **Database**: MongoDB (Atlas)
- **Auth**: JWT, Google OAuth, Moscownpur ID (Supabase SSO)

## Observations
- [x] Clean up Frontend dependencies (remove backend packages).
- [x] Add `start` and `dev` scripts to backend `package.json`.
- [x] Set up ShadCN UI (initialized & button added).
- [x] Clean up Frontend dependencies (remove backend packages).
- [x] Add `start` and `dev` scripts to backend `package.json`.
- [x] Set up ShadCN UI (initialized & button added).
- [x] Rebrand to "Moscownpur Circles" (Logo, Fonts, Home Page).
- [x] Redesign Navbar (Floating Glass Island).
- [x] Redesign Profile Page (Immersive Tabbed UI).
- [x] Unique Reach (Impression) Tracking:
    - [x] Private to creator (only owner sees reach).
    - [x] Unique viewer logic (tracked via `viewers` array in Post schema).
    - [x] Frontend observer to trigger reach on 50% visibility.
- [x] Real-time Pulse (WebSockets):
    - [x] Centralized socket utility (`socket.js`).
    - [x] Live Feed: New creations appear instantly.
    - [x] Live Updates: Edits and Likes sync across all orbits in real-time.
- [x] Trending Intelligence:
    - [x] Automated Hashtag extraction from descriptions.
    - [x] Real-time Trending sidebar (recalculated & broadcasted on every post/edit).
- [x] Navigation Polish:
    - [x] "Bookmarks" sidebar link mapped to `Profile > Saved` tab.
    - [x] Deep-linking support for Profile tabs via URL search params.
- [x] UI/UX & Bug Fixes:
    - [x] Redesigned SearchBar (Glassmorphism, Avatars, Glowing states).
    - [x] Fixed "Ghost/Blank Post" creation glitch (corrected `user.image` reference).
    - [x] Hardened backend against `CastError` for invalid Signal IDs.
- [x] Moscownpur (RealM) Integration:
    - [x] Bidirectional ID mapping between MongoDB and Supabase.
    - [x] Real-time creative stats display (Worlds, Chars, XP) on profile.
    - [x] Data Migration: Initialized Realm fields for existing users.
- [x] Authentication Redesign (Premium Glassmorphism):
    - [x] Login, SignUp, and GoogleSignUp pages redesigned with dark theme, glassmorphism, and narrative backgrounds.
    - [x] Theme-aware primary color system (Tailwind `primary` utility dynamically linked to `--primary-color`).
    - [x] Fixed CSS variable mapping for transparency effects (`--primary-rgb` for rgba functions).
    - [x] Custom fonts integrated (Bungee, Nerko One, Borel) for premium branding.
- [x] Moscownpur ID (Unified SSO):
    - [x] Supabase OAuth integration for cross-platform authentication.
    - [x] Backend `/supabase-login` endpoint for automated account provisioning.
    - [x] Frontend "Moscownpur ID" button with live pulse animation and gradient styling.
    - [x] Collapsible legacy login (email/password) for backward compatibility.
    - [x] Environment variable alignment (`VITE_REALM_SUPABASE_URL`, `VITE_REALM_SUPABASE_ANON_KEY`).
    - [x] Configuration validation with `isSupabaseConfigured` flag.
- [x] Production Build & Deployment:
    - [x] Resolved Case-Sensitivity issue: Renamed `components/UI` to `components/ui` for Linux/Render compatibility.
    - [x] Fixed Static Asset Serving: Updated `backend/server.js` with ES Modules compliant `__dirname` logic.
    - [x] Verified build pipeline: Frontend assets successfully migrate to `backend/public` for unified serving.
- **Port config**: Backend runs on 3000 (default), allows CORS from 5173. Render uses PORT 10000.
